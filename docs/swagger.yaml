basePath: /api/v1
definitions:
  github_com_varluffy_shield_internal_dto.AssignPermissionsRequest:
    properties:
      permission_ids:
        items:
          type: integer
        type: array
    required:
    - permission_ids
    type: object
  github_com_varluffy_shield_internal_dto.BatchImportBlacklistRequest:
    properties:
      phone_md5_list:
        items:
          type: string
        maxItems: 10000
        minItems: 1
        type: array
      reason:
        example: 批量导入
        type: string
      source:
        example: import
        type: string
    required:
    - phone_md5_list
    - source
    type: object
  github_com_varluffy_shield_internal_dto.BatchImportResponse:
    properties:
      failed_count:
        example: 0
        type: integer
      failed_items:
        example:
        - '[]'
        items:
          type: string
        type: array
      success_count:
        example: 100
        type: integer
    type: object
  github_com_varluffy_shield_internal_dto.BlacklistInfo:
    properties:
      created_at:
        example: "2024-01-01T10:00:00Z"
        type: string
      id:
        example: 1
        type: integer
      is_active:
        example: true
        type: boolean
      operator_id:
        example: 1
        type: integer
      phone_md5:
        example: 5d41402abc4b2a76b9719d911017c592
        type: string
      reason:
        example: 用户投诉
        type: string
      source:
        example: manual
        type: string
      updated_at:
        example: "2024-01-01T10:00:00Z"
        type: string
      uuid:
        example: 123e4567-e89b-12d3-a456-426614174000
        type: string
    type: object
  github_com_varluffy_shield_internal_dto.CaptchaGenerateResponse:
    properties:
      captcha_id:
        example: abc123
        type: string
      captcha_image:
        example: data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...
        type: string
    type: object
  github_com_varluffy_shield_internal_dto.CaptchaVerifyRequest:
    properties:
      answer:
        example: "1234"
        type: string
      captcha_id:
        example: abc123
        type: string
    required:
    - answer
    - captcha_id
    type: object
  github_com_varluffy_shield_internal_dto.CheckBlacklistRequest:
    properties:
      phone_md5:
        example: 5d41402abc4b2a76b9719d911017c592
        type: string
    required:
    - phone_md5
    type: object
  github_com_varluffy_shield_internal_dto.CheckBlacklistResponse:
    properties:
      is_blacklist:
        example: true
        type: boolean
      phone_md5:
        example: 5d41402abc4b2a76b9719d911017c592
        type: string
    type: object
  github_com_varluffy_shield_internal_dto.CreateBlacklistRequest:
    properties:
      phone_md5:
        example: 5d41402abc4b2a76b9719d911017c592
        type: string
      reason:
        example: 用户投诉
        type: string
      source:
        example: manual
        type: string
    required:
    - phone_md5
    - source
    type: object
  github_com_varluffy_shield_internal_dto.CreateRoleRequest:
    properties:
      code:
        example: admin
        type: string
      description:
        example: 系统管理员角色
        type: string
      name:
        example: 管理员
        type: string
    required:
    - code
    - name
    type: object
  github_com_varluffy_shield_internal_dto.CreateUserRequest:
    properties:
      email:
        type: string
      name:
        maxLength: 50
        minLength: 2
        type: string
      password:
        maxLength: 128
        minLength: 8
        type: string
    required:
    - email
    - name
    - password
    type: object
  github_com_varluffy_shield_internal_dto.FieldConfig:
    properties:
      default_value:
        type: string
      description:
        type: string
      field_label:
        type: string
      field_name:
        type: string
      field_type:
        type: string
      is_required:
        type: boolean
      sort_order:
        type: integer
    required:
    - field_name
    - field_type
    type: object
  github_com_varluffy_shield_internal_dto.FieldPermissionConfig:
    properties:
      field_name:
        type: string
      permission_type:
        type: string
    required:
    - field_name
    - permission_type
    type: object
  github_com_varluffy_shield_internal_dto.GetBlacklistResponse:
    properties:
      items:
        items:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.BlacklistInfo'
        type: array
      pagination:
        $ref: '#/definitions/github_com_varluffy_shield_internal_dto.PaginationInfo'
    type: object
  github_com_varluffy_shield_internal_dto.InitializeFieldsRequest:
    properties:
      fields:
        items:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.FieldConfig'
        type: array
    required:
    - fields
    type: object
  github_com_varluffy_shield_internal_dto.LoginRequest:
    properties:
      answer:
        example: "1234"
        type: string
      captcha_id:
        example: abc123
        type: string
      email:
        example: test@example.com
        type: string
      password:
        example: password123
        type: string
    required:
    - answer
    - captcha_id
    - email
    - password
    type: object
  github_com_varluffy_shield_internal_dto.PaginationInfo:
    properties:
      page:
        example: 1
        type: integer
      page_size:
        example: 20
        type: integer
      total:
        example: 100
        type: integer
      total_pages:
        example: 5
        type: integer
    type: object
  github_com_varluffy_shield_internal_dto.QueryStatsResponse:
    properties:
      avg_latency_ms:
        example: 5.2
        type: number
      hit_count:
        example: 150
        type: integer
      hit_rate:
        example: 15
        type: number
      miss_count:
        example: 850
        type: integer
      total_queries:
        example: 1000
        type: integer
    type: object
  github_com_varluffy_shield_internal_dto.RefreshTokenRequest:
    properties:
      refresh_token:
        type: string
    required:
    - refresh_token
    type: object
  github_com_varluffy_shield_internal_dto.RegisterRequest:
    properties:
      answer:
        type: string
      captcha_id:
        type: string
      email:
        type: string
      name:
        maxLength: 50
        minLength: 2
        type: string
      password:
        maxLength: 128
        minLength: 8
        type: string
    required:
    - answer
    - captcha_id
    - email
    - name
    - password
    type: object
  github_com_varluffy_shield_internal_dto.TestLoginRequest:
    properties:
      email:
        example: test@example.com
        type: string
      password:
        example: password123
        type: string
    required:
    - email
    - password
    type: object
  github_com_varluffy_shield_internal_dto.UpdatePermissionRequest:
    properties:
      description:
        type: string
      is_active:
        type: boolean
      name:
        type: string
    required:
    - name
    type: object
  github_com_varluffy_shield_internal_dto.UpdateRoleFieldPermissionsRequest:
    properties:
      field_permissions:
        items:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.FieldPermissionConfig'
        type: array
    required:
    - field_permissions
    type: object
  github_com_varluffy_shield_internal_dto.UpdateRoleRequest:
    properties:
      description:
        example: 系统管理员角色
        type: string
      is_active:
        example: true
        type: boolean
      name:
        example: 管理员
        type: string
    required:
    - name
    type: object
  github_com_varluffy_shield_internal_dto.UpdateUserRequest:
    properties:
      active:
        type: boolean
      email:
        type: string
      name:
        maxLength: 50
        minLength: 2
        type: string
    type: object
  github_com_varluffy_shield_pkg_response.PaginationMeta:
    properties:
      limit:
        description: 每页数量
        type: integer
      page:
        description: 当前页
        type: integer
      total:
        description: 总数
        type: integer
      total_pages:
        description: 总页数
        type: integer
    type: object
  github_com_varluffy_shield_pkg_response.PaginationResponse:
    properties:
      code:
        description: 业务错误码
        type: integer
      data:
        description: 响应数据
      message:
        description: 响应消息
        type: string
      meta:
        $ref: '#/definitions/github_com_varluffy_shield_pkg_response.PaginationMeta'
      timestamp:
        description: 响应时间戳 (RFC3339格式)
        type: string
      trace_id:
        description: 追踪ID
        type: string
    type: object
  github_com_varluffy_shield_pkg_response.Response:
    properties:
      code:
        description: 业务错误码
        type: integer
      data:
        description: 响应数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应时间戳 (RFC3339格式)
        type: string
      trace_id:
        description: 追踪ID
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: admin@ultrafit.com
    name: UltraFit Team
  description: UltraFit 多租户权限管理系统 API
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: https://ultrafit.com/terms/
  title: UltraFit API
  version: 1.0.0
paths:
  /admin/users:
    post:
      consumes:
      - application/json
      description: 创建新的用户账号，需要管理员权限
      parameters:
      - description: 用户信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.CreateUserRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 创建用户账号（管理员权限）
      tags:
      - admin
  /api/v1/admin/blacklist:
    get:
      consumes:
      - application/json
      description: 分页获取黑名单列表
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/github_com_varluffy_shield_internal_dto.GetBlacklistResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 获取黑名单列表
      tags:
      - 黑名单管理
    post:
      consumes:
      - application/json
      description: 创建新的黑名单记录
      parameters:
      - description: 创建请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.CreateBlacklistRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/github_com_varluffy_shield_internal_dto.BlacklistInfo'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 创建黑名单
      tags:
      - 黑名单管理
  /api/v1/admin/blacklist/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定的黑名单记录
      parameters:
      - description: 黑名单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 删除黑名单
      tags:
      - 黑名单管理
  /api/v1/admin/blacklist/import:
    post:
      consumes:
      - application/json
      description: 批量导入黑名单记录
      parameters:
      - description: 批量导入请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.BatchImportBlacklistRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/github_com_varluffy_shield_internal_dto.BatchImportResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 批量导入黑名单
      tags:
      - 黑名单管理
  /api/v1/admin/blacklist/stats:
    get:
      consumes:
      - application/json
      description: 获取黑名单查询统计信息
      parameters:
      - default: 24
        description: 统计小时数
        in: query
        name: hours
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/github_com_varluffy_shield_internal_dto.QueryStatsResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 获取查询统计
      tags:
      - 黑名单管理
  /api/v1/blacklist/check:
    post:
      consumes:
      - application/json
      description: 检查手机号MD5是否在黑名单中
      parameters:
      - description: API密钥
        in: header
        name: X-API-Key
        required: true
        type: string
      - description: 时间戳
        in: header
        name: X-Timestamp
        required: true
        type: string
      - description: 随机数
        in: header
        name: X-Nonce
        required: true
        type: string
      - description: HMAC签名
        in: header
        name: X-Signature
        required: true
        type: string
      - description: 查询请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.CheckBlacklistRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/github_com_varluffy_shield_internal_dto.CheckBlacklistResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      summary: 检查黑名单
      tags:
      - 黑名单查询
  /auth/login:
    post:
      consumes:
      - application/json
      parameters:
      - description: 登录凭据
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      summary: 用户登录
      tags:
      - auth
  /auth/refresh:
    post:
      consumes:
      - application/json
      parameters:
      - description: 刷新令牌
        in: body
        name: refresh
        required: true
        schema:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.RefreshTokenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      summary: 刷新访问令牌
      tags:
      - auth
  /auth/register:
    post:
      consumes:
      - application/json
      parameters:
      - description: 注册信息
        in: body
        name: registration
        required: true
        schema:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      summary: 用户注册
      tags:
      - auth
  /auth/test-login:
    post:
      consumes:
      - application/json
      parameters:
      - description: 测试登录凭据
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.TestLoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      summary: 测试登录（跳过验证码）
      tags:
      - auth
  /captcha/generate:
    get:
      consumes:
      - application/json
      description: Generate a new captcha image
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/github_com_varluffy_shield_internal_dto.CaptchaGenerateResponse'
              type: object
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      summary: Generate captcha
      tags:
      - Captcha
  /captcha/verify:
    post:
      consumes:
      - application/json
      description: Verify captcha answer
      parameters:
      - description: Captcha verify request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.CaptchaVerifyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      summary: Verify captcha
      tags:
      - Captcha
  /field-permissions/roles/{roleId}/{tableName}:
    get:
      consumes:
      - application/json
      description: 获取指定角色在指定表的字段权限配置
      parameters:
      - description: 角色ID
        in: path
        name: roleId
        required: true
        type: integer
      - description: 表名
        in: path
        name: tableName
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 获取角色字段权限
      tags:
      - field-permissions
    put:
      consumes:
      - application/json
      description: 批量更新角色在指定表的字段权限配置
      parameters:
      - description: 角色ID
        in: path
        name: roleId
        required: true
        type: integer
      - description: 表名
        in: path
        name: tableName
        required: true
        type: string
      - description: 字段权限配置
        in: body
        name: permissions
        required: true
        schema:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.UpdateRoleFieldPermissionsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 更新角色字段权限
      tags:
      - field-permissions
  /field-permissions/tables/{tableName}/fields:
    get:
      consumes:
      - application/json
      description: 获取指定表的字段权限配置列表
      parameters:
      - description: 表名
        in: path
        name: tableName
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 获取表字段配置
      tags:
      - field-permissions
  /permissions:
    get:
      consumes:
      - application/json
      description: 根据用户身份自动返回对应的权限列表：系统管理员看到所有权限，租户管理员只看到租户权限
      parameters:
      - description: 权限模块：user, role, system等
        in: query
        name: module
        type: string
      - description: 权限类型：menu, button, api
        in: query
        name: type
        type: string
      - description: 页码，默认1
        in: query
        name: page
        type: integer
      - description: 每页数量，默认20
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 获取权限列表
      tags:
      - permissions
  /permissions/tree:
    get:
      consumes:
      - application/json
      description: 根据用户身份自动返回权限树：系统管理员可指定scope或获取全部，租户管理员只能获取租户权限树
      parameters:
      - description: 权限作用域：system, tenant（可选，系统管理员可用）
        in: query
        name: scope
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 获取权限树结构
      tags:
      - permissions
  /roles:
    get:
      consumes:
      - application/json
      description: 获取租户内的角色列表，支持分页
      parameters:
      - description: 页码，默认1
        in: query
        name: page
        type: integer
      - description: 每页数量，默认20
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 获取角色列表
      tags:
      - roles
    post:
      consumes:
      - application/json
      description: 创建新的角色，需要租户管理员权限
      parameters:
      - description: 角色信息
        in: body
        name: role
        required: true
        schema:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.CreateRoleRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 创建角色
      tags:
      - roles
  /roles/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定角色，需要租户管理员权限
      parameters:
      - description: 角色ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 删除角色
      tags:
      - roles
    get:
      consumes:
      - application/json
      description: 根据ID获取角色详细信息
      parameters:
      - description: 角色ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 获取角色信息
      tags:
      - roles
    put:
      consumes:
      - application/json
      description: 更新角色信息，需要租户管理员权限
      parameters:
      - description: 角色ID
        in: path
        name: id
        required: true
        type: integer
      - description: 角色更新信息
        in: body
        name: role
        required: true
        schema:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.UpdateRoleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 更新角色
      tags:
      - roles
  /roles/{id}/permissions:
    get:
      consumes:
      - application/json
      description: 获取指定角色的权限列表
      parameters:
      - description: 角色ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 获取角色权限
      tags:
      - roles
    post:
      consumes:
      - application/json
      description: 为角色分配权限列表，需要租户管理员权限
      parameters:
      - description: 角色ID
        in: path
        name: id
        required: true
        type: integer
      - description: 权限ID列表
        in: body
        name: permissions
        required: true
        schema:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.AssignPermissionsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 分配权限给角色
      tags:
      - roles
  /system/field-permissions/{tableName}/initialize:
    post:
      consumes:
      - application/json
      description: 为指定表初始化字段权限配置，需要系统管理员权限
      parameters:
      - description: 表名
        in: path
        name: tableName
        required: true
        type: string
      - description: 字段配置列表
        in: body
        name: fields
        required: true
        schema:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.InitializeFieldsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 初始化表字段权限
      tags:
      - system
  /system/permissions:
    get:
      consumes:
      - application/json
      deprecated: true
      description: ⚠️ 已废弃：建议使用 GET /permissions 接口，后端会自动根据用户身份过滤权限
      parameters:
      - description: 页码，默认1
        in: query
        name: page
        type: integer
      - description: 每页数量，默认20
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 获取系统权限列表（已废弃）
      tags:
      - system
  /system/permissions/{id}:
    put:
      consumes:
      - application/json
      description: 更新系统权限信息，只有系统管理员可以访问
      parameters:
      - description: 权限ID
        in: path
        name: id
        required: true
        type: integer
      - description: 权限更新信息
        in: body
        name: permission
        required: true
        schema:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.UpdatePermissionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 更新权限
      tags:
      - system
  /user/field-permissions/{tableName}:
    get:
      consumes:
      - application/json
      description: 获取当前登录用户对指定表的字段权限
      parameters:
      - description: 表名
        in: path
        name: tableName
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 获取当前用户字段权限
      tags:
      - user
  /user/permissions:
    get:
      consumes:
      - application/json
      description: 获取当前登录用户的所有权限信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 获取当前用户权限列表
      tags:
      - user
  /user/permissions/menu:
    get:
      consumes:
      - application/json
      description: 获取当前登录用户的菜单权限树
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 获取当前用户菜单权限
      tags:
      - user
  /users:
    get:
      consumes:
      - application/json
      description: 获取系统中所有用户的列表，支持分页和筛选，需要管理员权限
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: limit
        type: integer
      - description: 用户名筛选
        in: query
        name: name
        type: string
      - description: 邮箱筛选
        in: query
        name: email
        type: string
      - description: 角色筛选
        in: query
        name: role
        type: string
      - description: 激活状态筛选
        in: query
        name: active
        type: boolean
      - default: created_at
        description: 排序字段
        in: query
        name: order_by
        type: string
      - default: DESC
        description: 排序方向
        in: query
        name: order_dir
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.PaginationResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 获取用户列表（管理员权限）
      tags:
      - users
  /users/{uuid}:
    delete:
      consumes:
      - application/json
      description: 删除指定用户，只有管理员可以执行此操作
      parameters:
      - description: 用户UUID
        in: path
        name: uuid
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 删除用户（管理员权限）
      tags:
      - users
    get:
      consumes:
      - application/json
      description: 获取用户详细信息，用户只能查看自己的信息，管理员可以查看任意用户
      parameters:
      - description: 用户UUID
        in: path
        name: uuid
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 获取用户信息
      tags:
      - users
    put:
      consumes:
      - application/json
      description: 更新用户信息，用户只能更新自己的信息，管理员可以更新任意用户
      parameters:
      - description: 用户UUID
        in: path
        name: uuid
        required: true
        type: string
      - description: 更新信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/github_com_varluffy_shield_internal_dto.UpdateUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_varluffy_shield_pkg_response.Response'
      security:
      - BearerAuth: []
      summary: 更新用户信息
      tags:
      - users
schemes:
- http
- https
securityDefinitions:
  BearerAuth:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
